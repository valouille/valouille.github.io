<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Media player qui ne fonctionne pas dans ownCloud 5 - VaLouille</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="VaLouille"><meta name=description content="Sur la toute nouvelle version d’ownCloud (5.0.0) le ‘Dropbox like libre’, le media player ne fonctionne pas. Il est impossible de lire de la musique. Dans firebug, j’ai trouvé l’erreur suivante :
{&amp;#34;data&amp;#34;:{&amp;#34;message&amp;#34;:&amp;#34;Token expired. Please reload page.&amp;#34;},&amp;#34;status&amp;#34;:&amp;#34;error&amp;#34;} En fait, il faut modifier le fichier apps/media/ajax/api.php tel que ci-dessous :
\OCP\JSON::checkAppEnabled(&amp;#39;media&amp;#39;); \OCP\JSON::checkLoggedIn(); -\OCP\JSON::callCheck(); error_reporting(E_ALL); //no script error reporting because of getID3 @@ -43,6 +42,7 @@ if ($arguments[&amp;#39;action&amp;#39;]) { switch ($arguments[&amp;#39;action&amp;#39;]) { case &amp;#39;delete&amp;#39;: + \OCP\JSON::callCheck(); $path = $arguments[&amp;#39;path&amp;#39;]; $collection-&amp;gt;deleteSongByPath($path); $paths = explode(PATH_SEPARATOR, \OCP\Config::getUserValue(\OCP\USER::getUser(), &amp;#39;media&amp;#39;, &amp;#39;paths&amp;#39;, &amp;#39;&amp;#39;)); "><meta name=keywords content="Valérian,Beaudoin,VaLouille"><meta name=generator content="Hugo 0.103.1 with theme even"><link rel=canonical href=https://valouille.github.io/2013/03/media-player-qui-ne-fonctionne-pas-dans-owncloud-5/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css rel=stylesheet><link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet><meta property="og:title" content="Media player qui ne fonctionne pas dans ownCloud 5"><meta property="og:description" content="Sur la toute nouvelle version d’ownCloud (5.0.0) le ‘Dropbox like libre’, le media player ne fonctionne pas. Il est impossible de lire de la musique. Dans firebug, j’ai trouvé l’erreur suivante :
{&#34;data&#34;:{&#34;message&#34;:&#34;Token expired. Please reload page.&#34;},&#34;status&#34;:&#34;error&#34;} En fait, il faut modifier le fichier apps/media/ajax/api.php tel que ci-dessous :
\OCP\JSON::checkAppEnabled('media'); \OCP\JSON::checkLoggedIn(); -\OCP\JSON::callCheck(); error_reporting(E_ALL); //no script error reporting because of getID3 @@ -43,6 +42,7 @@ if ($arguments['action']) { switch ($arguments['action']) { case 'delete': + \OCP\JSON::callCheck(); $path = $arguments['path']; $collection->deleteSongByPath($path); $paths = explode(PATH_SEPARATOR, \OCP\Config::getUserValue(\OCP\USER::getUser(), 'media', 'paths', '')); "><meta property="og:type" content="article"><meta property="og:url" content="https://valouille.github.io/2013/03/media-player-qui-ne-fonctionne-pas-dans-owncloud-5/"><meta property="article:section" content="post"><meta property="article:published_time" content="2013-03-15T15:32:50+00:00"><meta property="article:modified_time" content="2013-03-15T15:32:50+00:00"><meta itemprop=name content="Media player qui ne fonctionne pas dans ownCloud 5"><meta itemprop=description content="Sur la toute nouvelle version d’ownCloud (5.0.0) le ‘Dropbox like libre’, le media player ne fonctionne pas. Il est impossible de lire de la musique. Dans firebug, j’ai trouvé l’erreur suivante :
{&#34;data&#34;:{&#34;message&#34;:&#34;Token expired. Please reload page.&#34;},&#34;status&#34;:&#34;error&#34;} En fait, il faut modifier le fichier apps/media/ajax/api.php tel que ci-dessous :
\OCP\JSON::checkAppEnabled('media'); \OCP\JSON::checkLoggedIn(); -\OCP\JSON::callCheck(); error_reporting(E_ALL); //no script error reporting because of getID3 @@ -43,6 +42,7 @@ if ($arguments['action']) { switch ($arguments['action']) { case 'delete': + \OCP\JSON::callCheck(); $path = $arguments['path']; $collection->deleteSongByPath($path); $paths = explode(PATH_SEPARATOR, \OCP\Config::getUserValue(\OCP\USER::getUser(), 'media', 'paths', '')); "><meta itemprop=datePublished content="2013-03-15T15:32:50+00:00"><meta itemprop=dateModified content="2013-03-15T15:32:50+00:00"><meta itemprop=wordCount content="85"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Media player qui ne fonctionne pas dans ownCloud 5"><meta name=twitter:description content="Sur la toute nouvelle version d’ownCloud (5.0.0) le ‘Dropbox like libre’, le media player ne fonctionne pas. Il est impossible de lire de la musique. Dans firebug, j’ai trouvé l’erreur suivante :
{&#34;data&#34;:{&#34;message&#34;:&#34;Token expired. Please reload page.&#34;},&#34;status&#34;:&#34;error&#34;} En fait, il faut modifier le fichier apps/media/ajax/api.php tel que ci-dessous :
\OCP\JSON::checkAppEnabled('media'); \OCP\JSON::checkLoggedIn(); -\OCP\JSON::callCheck(); error_reporting(E_ALL); //no script error reporting because of getID3 @@ -43,6 +42,7 @@ if ($arguments['action']) { switch ($arguments['action']) { case 'delete': + \OCP\JSON::callCheck(); $path = $arguments['path']; $collection->deleteSongByPath($path); $paths = explode(PATH_SEPARATOR, \OCP\Config::getUserValue(\OCP\USER::getUser(), 'media', 'paths', '')); "><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>VaLouille</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/cv/><li class=mobile-menu-item>About Me</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>VaLouille</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/cv/>About Me</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Media player qui ne fonctionne pas dans ownCloud 5</h1><div class=post-meta><span class=post-time>2013-03-15</span><div class=post-category><a href=/categories/linux/>linux</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents></nav></div></div><div class=post-content><p>Sur la toute nouvelle version d’ownCloud (5.0.0) le ‘Dropbox like libre’, le media player ne fonctionne pas. Il est impossible de lire de la musique. Dans firebug, j’ai trouvé l’erreur suivante :</p><pre tabindex=0><code>{&#34;data&#34;:{&#34;message&#34;:&#34;Token expired. Please reload page.&#34;},&#34;status&#34;:&#34;error&#34;}
</code></pre><p>En fait, il faut modifier le fichier apps/media/ajax/api.php tel que ci-dessous :</p><pre tabindex=0><code> \OCP\JSON::checkAppEnabled(&#39;media&#39;);
 \OCP\JSON::checkLoggedIn();
-\OCP\JSON::callCheck();
 
 error_reporting(E_ALL); //no script error reporting because of getID3
 
@@ -43,6 +42,7 @@
 if ($arguments[&#39;action&#39;]) {
   switch ($arguments[&#39;action&#39;]) {
     case &#39;delete&#39;:
+      \OCP\JSON::callCheck();
       $path = $arguments[&#39;path&#39;];
       $collection-&gt;deleteSongByPath($path);
       $paths = explode(PATH_SEPARATOR, \OCP\Config::getUserValue(\OCP\USER::getUser(), &#39;media&#39;, &#39;paths&#39;, &#39;&#39;));
</code></pre></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>VaLouille</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2013-03-15</span></p></div><footer class=post-footer><nav class=post-nav><a class=prev href=/2013/03/resoudre-lerreur-http-414-dans-puppet/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Résoudre l'erreur HTTP 414 dans puppet</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/2013/02/se-connecter-a-un-vpn-ipsec-avec-vpnc/><span class="next-text nav-default">Se connecter à un VPN IPSEC avec vpnc</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname==="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="valouille",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:valerian.beaudoin@gmail.com class="iconfont icon-email" title=email></a>
<a href=https://www.linkedin.com/in/valouille/ class="iconfont icon-linkedin" title=linkedin></a>
<a href=https://valouille.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2013 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>Valérian Beaudoin</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38377556-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>