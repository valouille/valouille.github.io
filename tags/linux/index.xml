<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on VaLouille</title><link>https://valouille.github.io/tags/linux/</link><description>Recent content in Linux on VaLouille</description><generator>Hugo</generator><language>fr</language><copyright>Valérian Beaudoin</copyright><lastBuildDate>Fri, 23 Nov 2018 19:37:00 +0100</lastBuildDate><atom:link href="https://valouille.github.io/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Install all firmware updates on Dell PowerEdge servers with Ansible</title><link>https://valouille.github.io/post/2018-11-23-install-all-pending-update-on-dell-poweredge-servers-using-ansible/</link><pubDate>Fri, 23 Nov 2018 19:37:00 +0100</pubDate><guid>https://valouille.github.io/post/2018-11-23-install-all-pending-update-on-dell-poweredge-servers-using-ansible/</guid><description>This feature is only available with iDRAC Enterprise License.
The supported servers are :
12G and 13G PowerEdge Servers: iDRAC 7 and 8 with Firmware version 2.50.50.50 and above 14G PowerEdge Servers: iDRAC 9 with Firmware version 3.18.18.18 and above While looking once more for the most easy way to update Dell servers firmwares, I stepped on this awesome video showing someone from Dell use Ansible to update at once all the firmwares of a server :</description></item><item><title>Installer SNMP sur VCSA 6.5</title><link>https://valouille.github.io/2016/12/installer-snmp-sur-vcsa-6-5/</link><pubDate>Thu, 08 Dec 2016 15:38:14 +0000</pubDate><guid>https://valouille.github.io/2016/12/installer-snmp-sur-vcsa-6-5/</guid><description>Pour installer net-snmp sur le version 6.5 de l’appliance linux vCenter 6.5 basée sur photon OS, voici la procédure à suivre. Toutes ces commandes sont à exécuter en root sur le vCenter.
Si vous avez un proxy, il faut paramétrer la variable https_proxy.
On désactive le SNMP de VMware :
vicfg-snmp -D On supprime le SNMP de VMware :
rpm -e vmware-snmp On installe SNMP via tdnf (Tiny Dandified Yum) :</description></item><item><title>Changer l'adresse ou le domaine de destination dans Postfix</title><link>https://valouille.github.io/2014/05/changer-ladresse-ou-le-domaine-de-destination-dans-postfix/</link><pubDate>Wed, 14 May 2014 15:57:33 +0000</pubDate><guid>https://valouille.github.io/2014/05/changer-ladresse-ou-le-domaine-de-destination-dans-postfix/</guid><description>Pour modifier l’adresse de destination des mails envoyés dans Postfix, il faut passer par trivial-rewrite. Pour ce faire, il faut ajouter dans le fichier /etc/postfix/main.cf :
smtp_generic_maps = regexp:/etc/postfix/generic Ensuite, dans le fichier /etc/postfix/generic
/^.*@domain1.com/ user1@domain1.com # renvoyer le domaine vers un utilisateur spécifique /^.*@domain1.com/ $1@domain2.com # renvoyer les mails de l&amp;#39;utilisateur de domain1.com vers domain2.com /^.*@.*/ user1@domain1.com # tout renvoyer vers user1@domain1.com Pour activer la configuration :
postmap /etc/postfix/generic /etc/init.</description></item><item><title>Nettoyer les logs IPMI sous linux en ligne de commande</title><link>https://valouille.github.io/2013/12/nettoyer-les-logs-ipmi-sous-linux-en-ligne-de-commande/</link><pubDate>Mon, 16 Dec 2013 12:53:45 +0000</pubDate><guid>https://valouille.github.io/2013/12/nettoyer-les-logs-ipmi-sous-linux-en-ligne-de-commande/</guid><description>Les logs systèmes sur les serveurs Dell peuvent ne plus s’écrire au bout d’un certain temps. En effet, l’espace est limité.
Les erreurs en résultant seront de la forme :
Event Logging Disabled #0x72 | Log full | Asserted ou
ESM log is 100% full On peut utiliser la commande ipmitool suivante pour les effacer, et ainsi permettre à nouveau l’écriture des logs :
ipmitool sel clear</description></item><item><title>Corriger la faille kernel CVE-2013-2094 sans reboot sous Debian</title><link>https://valouille.github.io/2013/05/corriger-la-faille-kernel-cve-2013-2094-sans-reboot-sous-debian/</link><pubDate>Tue, 21 May 2013 13:36:11 +0000</pubDate><guid>https://valouille.github.io/2013/05/corriger-la-faille-kernel-cve-2013-2094-sans-reboot-sous-debian/</guid><description>L’exploit CVE-2013-2094 permet d’exploiter une faille dans la perf_swevent_init function du fichier kernel/events/core.c du noyau Linux, entre les versions 2.6.37 et 3.8.8. Cet exploit permet de passer root.
Pour voir si le noyau utilisé est vulnérable, on peut utiliser la commande suivante :
grep CONFIG_PERF_EVENTS /boot/config-`uname -r` Si la commande renvoie la ligne suivante, et que la version du noyau est comprise entre 2.6.37 et 3.8.8, alors le noyau est vulnérable :</description></item><item><title>Voir le switch ainsi que le port sur lequel une machine est branchée avec tcpdump</title><link>https://valouille.github.io/2013/04/voir-le-switch-ainsi-que-le-port-sur-lequel-une-machine-est-branchee-avec-tcpdump/</link><pubDate>Thu, 18 Apr 2013 15:40:03 +0000</pubDate><guid>https://valouille.github.io/2013/04/voir-le-switch-ainsi-que-le-port-sur-lequel-une-machine-est-branchee-avec-tcpdump/</guid><description>Une alternative à cdpr consite à utiliser tcpdump pour lire les informations contenues dans les trames CDP. En effet, cdpr est gourmand en ressources et est assez lent. Voici ce que l’on peut faire avec tcpdump :
tcpdump -nn -v -i eth0 -s 1500 -c 1 &amp;#39;ether[20:2] == 0x2000&amp;#39; tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 1500 bytes 15:37:08.888679 CDPv2, ttl: 180s, checksum: 692 (unverified), length 373 Device-ID (0x01), length: 7 bytes: &amp;#39;sw02.</description></item><item><title>Concaténer deux fichiers, ou les merger une ligne sur deux</title><link>https://valouille.github.io/2013/02/concatener-deux-fichiers-ou-les-merger-une-ligne-sur-deux/</link><pubDate>Tue, 19 Feb 2013 15:26:19 +0000</pubDate><guid>https://valouille.github.io/2013/02/concatener-deux-fichiers-ou-les-merger-une-ligne-sur-deux/</guid><description>Parfois, on a une liste dans les mains sous forme de fichier texte, et on doit insérer du contenu à la fin, ou une ligne sur deux. Pour cela, on peut utiliser la commande « paste ».
Prennons le cas de ces deux fichiers :
% cat fichier1.txt 111 222 333 % cat fichier2.txt aaa bbb ccc Si on veut la concaténer, voici la commande :
% paste -d &amp;#39; &amp;#39; fichier1.</description></item><item><title>Empêcher la suppression/modification d'un fichier par root</title><link>https://valouille.github.io/2013/02/empecher-la-suppression-dun-fichier-pour-root/</link><pubDate>Tue, 19 Feb 2013 15:09:38 +0000</pubDate><guid>https://valouille.github.io/2013/02/empecher-la-suppression-dun-fichier-pour-root/</guid><description>Pour empêcher la modification ou la suppression d’un fichier, y compris pour root, on peut utiliser la commande « chattr » qui permet de mettre en place des attributs avancés sur les fichiers.
Pour bloquer un fichier : chattr +i fichier Pour voir les attributs avancés d’un fichier : lsattr ----i----------- ./fichier Pour débloquer un fichier chattr -i fichier</description></item><item><title>Mettre en place du bonding sous Linux avec un switch Cisco</title><link>https://valouille.github.io/2013/02/mettre-en-place-du-bonding-sous-linux-avec-un-switch-cisco/</link><pubDate>Wed, 13 Feb 2013 17:46:11 +0000</pubDate><guid>https://valouille.github.io/2013/02/mettre-en-place-du-bonding-sous-linux-avec-un-switch-cisco/</guid><description>Le bonding, ou agrégation de lien, permet d’agréger deux liens afin de doubler le débit et d’avoir de la redondance.
Sur la machine, il faut installer le paquet suivant :
apt-get install ifenslave-2.6 Puis il faut éditer le fichier /etc/network/interfaces afin de commenter eth0 et eth1 et de configurer une interface bond0 :
auto bond0 iface bond0 inet static slaves eth0 eth1 bond-mode 802.3ad bond-miimon 100 bond-downdelay 200 bond-updelay 200 bond-lacp-rate fast address IP.</description></item><item><title>Voir quelles IP génèrent ou ont généré le plus de connexions</title><link>https://valouille.github.io/2013/02/voir-quelles-ip-generent-ou-ont-genere-le-plus-de-connexions/</link><pubDate>Wed, 13 Feb 2013 14:49:42 +0000</pubDate><guid>https://valouille.github.io/2013/02/voir-quelles-ip-generent-ou-ont-genere-le-plus-de-connexions/</guid><description>Pour savoir si on est en train de subir une attaque, il suffit de passer par netstat, et de présenter les résultats de manière lisible :
netstat -laptune | awk &amp;#39;{print $5}&amp;#39; | cut -d&amp;#34;:&amp;#34; -f1 | sort | uniq -c | sort -g | tail Le résultat montre les 10 IP qui initialisent le plus de connexions, ainsi que le nombre de connexions.
15 192.253.141.64 15 77.224.46.170 148 87.33.146.34 1117 92.</description></item></channel></rss>