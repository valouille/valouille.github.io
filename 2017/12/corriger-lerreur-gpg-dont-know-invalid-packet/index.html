<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Corriger l'erreur gpg: [don't know]: invalid packet - VaLouille</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="VaLouille"><meta name=description content="J’ai été confronté à l’erreur suivante en essayant d’ajouter une clé GPG à APT :
~ # apt-key add keyring.gpg gpg: [don&amp;#39;t know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: keydb_get_keyblock failed: Invalid keyring gpg: [don&amp;#39;t know]: invalid packet (ctb=2d) gpg: /tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg: copy to &amp;#39;/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg.tmp&amp;#39; failed: Invalid packet gpg: error writing keyring &amp;#39;/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg&amp;#39;: Invalid packet gpg: [don&amp;#39;t know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: error reading keyblock: Invalid keyring gpg: error reading &amp;#39;keyring."><meta name=keywords content="Valérian,Beaudoin,VaLouille"><meta name=generator content="Hugo 0.103.1 with theme even"><link rel=canonical href=https://valouille.github.io/2017/12/corriger-lerreur-gpg-dont-know-invalid-packet/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css rel=stylesheet><link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet><meta property="og:title" content="Corriger l'erreur gpg: [don't know]: invalid packet"><meta property="og:description" content="J’ai été confronté à l’erreur suivante en essayant d’ajouter une clé GPG à APT :
~ # apt-key add keyring.gpg gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: keydb_get_keyblock failed: Invalid keyring gpg: [don't know]: invalid packet (ctb=2d) gpg: /tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg: copy to '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg.tmp' failed: Invalid packet gpg: error writing keyring '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg': Invalid packet gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: error reading keyblock: Invalid keyring gpg: error reading 'keyring."><meta property="og:type" content="article"><meta property="og:url" content="https://valouille.github.io/2017/12/corriger-lerreur-gpg-dont-know-invalid-packet/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-12-28T16:40:07+00:00"><meta property="article:modified_time" content="2017-12-28T16:40:07+00:00"><meta itemprop=name content="Corriger l'erreur gpg: [don't know]: invalid packet"><meta itemprop=description content="J’ai été confronté à l’erreur suivante en essayant d’ajouter une clé GPG à APT :
~ # apt-key add keyring.gpg gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: keydb_get_keyblock failed: Invalid keyring gpg: [don't know]: invalid packet (ctb=2d) gpg: /tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg: copy to '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg.tmp' failed: Invalid packet gpg: error writing keyring '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg': Invalid packet gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: error reading keyblock: Invalid keyring gpg: error reading 'keyring."><meta itemprop=datePublished content="2017-12-28T16:40:07+00:00"><meta itemprop=dateModified content="2017-12-28T16:40:07+00:00"><meta itemprop=wordCount content="221"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Corriger l'erreur gpg: [don't know]: invalid packet"><meta name=twitter:description content="J’ai été confronté à l’erreur suivante en essayant d’ajouter une clé GPG à APT :
~ # apt-key add keyring.gpg gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: keydb_get_keyblock failed: Invalid keyring gpg: [don't know]: invalid packet (ctb=2d) gpg: /tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg: copy to '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg.tmp' failed: Invalid packet gpg: error writing keyring '/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg': Invalid packet gpg: [don't know]: invalid packet (ctb=2d) gpg: keyring_get_keyblock: read error: Invalid packet gpg: error reading keyblock: Invalid keyring gpg: error reading 'keyring."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>VaLouille</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/cv/><li class=mobile-menu-item>About Me</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>VaLouille</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/cv/>About Me</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Corriger l'erreur gpg: [don't know]: invalid packet</h1><div class=post-meta><span class=post-time>2017-12-28</span><div class=post-category><a href=/categories/linux/>linux</a>
<a href=/categories/sysadmin/>sysadmin</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents></nav></div></div><div class=post-content><p>J’ai été confronté à l’erreur suivante en essayant d’ajouter une clé GPG à APT :</p><pre tabindex=0><code>~ # apt-key add keyring.gpg
gpg: [don&#39;t know]: invalid packet (ctb=2d)
gpg: keyring_get_keyblock: read error: Invalid packet
gpg: keydb_get_keyblock failed: Invalid keyring
gpg: [don&#39;t know]: invalid packet (ctb=2d)
gpg: /tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg: copy to &#39;/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg.tmp&#39; failed: Invalid packet
gpg: error writing keyring &#39;/tmp/apt-key-gpghome.kpq2RJAPsu/pubring.gpg&#39;: Invalid packet
gpg: [don&#39;t know]: invalid packet (ctb=2d)
gpg: keyring_get_keyblock: read error: Invalid packet
gpg: error reading keyblock: Invalid keyring
gpg: error reading &#39;keyring.gpg&#39;: Invalid packet
gpg: import from &#39;keyring.gpg&#39; failed: Invalid packet
</code></pre><p>Cette erreur se manifeste lorsqu’une clé GPG est endommagée. Bien qu’il soit théoriquement possible via la commande « apt-key list » d’identifier la clé qui pose problème, et de restaurer le fichier qui se termine par « ~ », je ne suis pas parvenu à corriger le problème de cette manière.</p><p>Le seul moyen que j’ai trouvé pour corriger cette erreur a été de supprimer toutes les clés et de réinstaller les paquets qui mettent en place les clés pour les dépôts Debian (en spécifiant les options qui rétablissent les fichiers de configuration) :</p><pre tabindex=0><code>rm /etc/apt/trusted.gpg
rm /etc/apt/trusted.gpg.d/*
apt-get -o DPkg::options::=--force-confmiss --reinstall install debian-keyring debian-archive-keyring
</code></pre><p>On peut utiliser les commandes suivantes pour réinstaller les clés des dépôts tiers :</p><pre tabindex=0><code>gpg --keyserver pgpkeys.mit.edu --recv-key 1285436434D8686F
gpg -a --export 1285436434D8686F | apt-key add -
</code></pre></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>VaLouille</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2017-12-28</span></p></div><footer class=post-footer><nav class=post-nav><a class=prev href=/2018/01/corriger-lerreur-106-illegal-character-in-vcl-name-avec-varnish-5/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Corriger l'erreur 106 Illegal character in VCL name (‘:’) avec Varnish 5</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/2016/12/installer-snmp-sur-vcsa-6-5/><span class="next-text nav-default">Installer SNMP sur VCSA 6.5</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname==="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="valouille",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:valerian.beaudoin@gmail.com class="iconfont icon-email" title=email></a>
<a href=https://www.linkedin.com/in/valouille/ class="iconfont icon-linkedin" title=linkedin></a>
<a href=https://valouille.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2013 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>Valérian Beaudoin</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38377556-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>