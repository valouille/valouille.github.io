<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>VaLouille</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="VaLouille"><meta name=description content="Valérian Beaudoin's blog"><meta name=keywords content="Valérian,Beaudoin,VaLouille"><meta name=generator content="Hugo 0.103.1 with theme even"><link rel=canonical href=https://valouille.github.io/><link href=https://valouille.github.io/index.xml rel=alternate type=application/rss+xml title=VaLouille><link href=https://valouille.github.io/index.xml rel=feed type=application/rss+xml title=VaLouille><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css rel=stylesheet><link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet><meta property="og:title" content="VaLouille"><meta property="og:description" content="Valérian Beaudoin's blog"><meta property="og:type" content="website"><meta property="og:url" content="https://valouille.github.io/"><meta itemprop=name content="VaLouille"><meta itemprop=description content="Valérian Beaudoin's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="VaLouille"><meta name=twitter:description content="Valérian Beaudoin's blog"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>VaLouille</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/cv/><li class=mobile-menu-item>About Me</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>VaLouille</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/cv/>About Me</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/2018-03-15-impossible-d-obtenir-l-ip-relle-des-clients-via-le-header-x-forwarded-for-derriere-un-elb/>Récupérer et écrire dans les logs d'accès l'IP source des connexions sur AWS derrière un ELB/ALB avec le header X-Forwarded-For</a></h1><div class=post-meta><span class=post-time>2018-03-15</span><div class=post-category><a href=/categories/aws/>AWS</a></div></div></header><div class=post-content><div class=post-summary>Pour récupérer l&rsquo;adresse IP source du client qui initie la connexion au niveau d&rsquo;une instance située derrière un Load-Balancer, plutôt que l&rsquo;IP du Load-Balancer lui-même, il est nécessaire d&rsquo;utiliser un header HTTP spécifique.
Dans AWS, l&rsquo;ELB/ALB ajoute plusieurs headers par défaut, dont X-Forwarded-For, qui correspond à l&rsquo;adresse IP publique à partir de laquelle la connexion est effectuée.
Les headers ne sont ajoutés que lorsqu&rsquo;on utilise un Load-Balancer qui fait du niveau 7, c&rsquo;est à dire un Load-Balancer configuré pour se connecter sur les instances en HTTP et HTTPS, pas en TCP ou SSL (niveau 4).</div><div class=read-more><a href=/post/2018-03-15-impossible-d-obtenir-l-ip-relle-des-clients-via-le-header-x-forwarded-for-derriere-un-elb/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/2018-03-13-mettre-a-jour-gitlab-de-la-version-7-10-a-la-version-10-5/>Mettre à jour GitLab CE Omnibus de la version 7.10 à la version 10.5</a></h1><div class=post-meta><span class=post-time>2018-03-12</span><div class=post-category><a href=/categories/gitlab/>GitLab</a></div></div></header><div class=post-content><div class=post-summary>GitLab Omnibus est la version la plus simple à installer de GitLab. GitLab Omnibus est disponible depuis la version 6.6 et se présente sous la forme d&rsquo;un unique paquet .deb ou .rpm. La mise à jour se fait comme pour n&rsquo;importe quel paquet, mais faire un trop gros saut de version en une seule fois risque de ne pas fonctionner.
Pour les versions antérieures à 7.10, il est possible de la mettre à jour en 7.</div><div class=read-more><a href=/post/2018-03-13-mettre-a-jour-gitlab-de-la-version-7-10-a-la-version-10-5/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/2018-03-07-comment-j-ai-modernise-mon-blog-en-migrant-de-wordpress-a-hugo/>Comment j'ai modernisé mon blog en migrant de Wordpress à Hugo</a></h1><div class=post-meta><span class=post-time>2018-03-07</span><div class=post-category><a href=/categories/hugo/>Hugo</a></div></div></header><div class=post-content><div class=post-summary>J&rsquo;ai eu envie de donner un coup de jeune à mon blog, dont le design commençait à être relativement ancien, et qui ne s&rsquo;affichait pas toujours correctement sur mobile et tablette. De plus, Wordpress est un bon moteur de blog, mais la gestion des thèmes, des plugins, les mises à jour fréquentes, et le fait qu&rsquo;une stack LAMP complète soit nécessaire ne me convenait plus. J&rsquo;ai donc décidé de changer de moteur de blog, pour utiliser un générateur de sites statiques : Hugo.</div><div class=read-more><a href=/post/2018-03-07-comment-j-ai-modernise-mon-blog-en-migrant-de-wordpress-a-hugo/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/2018/03/le-reseau-dans-le-cloud-aws/>Le réseau dans le cloud AWS</a></h1><div class=post-meta><span class=post-time>2018-03-02</span><div class=post-category><a href=/categories/aws/>AWS</a></div></div></header><div class=post-content><div class=post-summary>Il est nécessaire de bien comprendre plusieurs concepts réseau afin de déployer une application dans le cloud AWS de manière optimale. Comme je n’ai pas trouvé de schéma qui regroupe l’ensemble des concepts, j’ai décidé d’en faire un, afin d’avoir une architecture de référence à utiliser pour décrire ces concepts. Évidemment, étant donné la relative complexité de l’infrastructure, le schéma est assez grand. Vous pouvez cliquer sur l’image pour ouvrir le fichier original.</div><div class=read-more><a href=/2018/03/le-reseau-dans-le-cloud-aws/ class=read-more-link>Read more...</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/2018/02/mettre-en-place-du-filtrage-ip-sur-un-bucket-s3/>Mettre en place du filtrage IP sur un bucket S3</a></h1><div class=post-meta><span class=post-time>2018-02-28</span><div class=post-category><a href=/categories/aws/>AWS</a></div></div></header><div class=post-content><div class=post-summary>Pour autoriser l’accès à un bucket S3 uniquement à partir de certaines IPs, il faut associer une bucket policy comme celle ci-dessous :
{ "Version": "2012-10-17", "Id": "S3PolicyMyIpFilter", "Statement": [ { "Sid": "IPAllow", "Effect": "Allow", "Principal": "*", "Action": "s3:*", "Resource": "arn:aws:s3:::bucket-name/*", "Condition": { "IpAddress": { "aws:SourceIp": [ "123.56.78.9/32", "98.76.54.32/32" ] } } } ] } Il faut adapter le nom du bucket S3, et paramétrer les IPs ou les ranges que l’on souhaite autoriser.</div><div class=read-more><a href=/2018/02/mettre-en-place-du-filtrage-ip-sur-un-bucket-s3/ class=read-more-link>Read more...</a></div></div></article></section><nav class=pagination><a class=prev href=/><i class="iconfont icon-left"></i>
<span class=prev-text>Prev</span></a>
<a class=next href=/page/3/><span class=next-text>Next</span>
<i class="iconfont icon-right"></i></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:valerian.beaudoin@gmail.com class="iconfont icon-email" title=email></a>
<a href=https://www.linkedin.com/in/valouille/ class="iconfont icon-linkedin" title=linkedin></a>
<a href=https://valouille.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2013 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>Valérian Beaudoin</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38377556-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>